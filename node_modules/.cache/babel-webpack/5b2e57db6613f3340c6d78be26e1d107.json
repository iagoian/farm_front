{"ast":null,"code":"import _inherits from \"C:/dev-faculdade/Portifolio/Testes-Job/farm_project/farm_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/dev-faculdade/Portifolio/Testes-Job/farm_project/farm_front/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/dev-faculdade/Portifolio/Testes-Job/farm_project/farm_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/dev-faculdade/Portifolio/Testes-Job/farm_project/farm_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function audit(durationSelector) {\n  return function auditOperatorFunction(source) {\n    return source.lift(new AuditOperator(durationSelector));\n  };\n}\nvar AuditOperator = /*#__PURE__*/function () {\n  function AuditOperator(durationSelector) {\n    _classCallCheck(this, AuditOperator);\n    this.durationSelector = durationSelector;\n  }\n  _createClass(AuditOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new AuditSubscriber(subscriber, this.durationSelector));\n    }\n  }]);\n  return AuditOperator;\n}();\nvar AuditSubscriber = /*#__PURE__*/function (_SimpleOuterSubscribe) {\n  _inherits(AuditSubscriber, _SimpleOuterSubscribe);\n  var _super = _createSuper(AuditSubscriber);\n  function AuditSubscriber(destination, durationSelector) {\n    var _this;\n    _classCallCheck(this, AuditSubscriber);\n    _this = _super.call(this, destination);\n    _this.durationSelector = durationSelector;\n    _this.hasValue = false;\n    return _this;\n  }\n  _createClass(AuditSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      this.value = value;\n      this.hasValue = true;\n      if (!this.throttled) {\n        var duration;\n        try {\n          var durationSelector = this.durationSelector;\n          duration = durationSelector(value);\n        } catch (err) {\n          return this.destination.error(err);\n        }\n        var innerSubscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n        if (!innerSubscription || innerSubscription.closed) {\n          this.clearThrottle();\n        } else {\n          this.add(this.throttled = innerSubscription);\n        }\n      }\n    }\n  }, {\n    key: \"clearThrottle\",\n    value: function clearThrottle() {\n      var value = this.value,\n        hasValue = this.hasValue,\n        throttled = this.throttled;\n      if (throttled) {\n        this.remove(throttled);\n        this.throttled = undefined;\n        throttled.unsubscribe();\n      }\n      if (hasValue) {\n        this.value = undefined;\n        this.hasValue = false;\n        this.destination.next(value);\n      }\n    }\n  }, {\n    key: \"notifyNext\",\n    value: function notifyNext() {\n      this.clearThrottle();\n    }\n  }, {\n    key: \"notifyComplete\",\n    value: function notifyComplete() {\n      this.clearThrottle();\n    }\n  }]);\n  return AuditSubscriber;\n}(SimpleOuterSubscriber);","map":{"version":3,"sources":["../../../src/internal/operators/audit.ts"],"names":[],"mappings":";;;;AAKA,SAAS,qBAAqB,EAAE,cAAc,EAAE,qBAAqB,QAAQ,mBAAmB;AAgDhG,OAAM,SAAU,KAAK,CAAI,gBAA0D,EAAA;EACjF,OAAO,SAAS,qBAAqB,CAAC,MAAqB,EAAA;IACzD,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,aAAa,CAAC,gBAAgB,CAAC,CAAC;EACzD,CAAC;AACH;AAAC,IAEK,aAAa;EACjB,uBAAoB,gBAA0D,EAAA;IAAA;IAA1D,IAAA,CAAA,gBAAgB,GAAhB,gBAAgB;EACpC;EAAC;IAAA;IAAA,OAED,cAAK,UAAyB,EAAE,MAAW,EAAA;MACzC,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,eAAe,CAAO,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;IACvF;EAAC;EAAA;AAAA;AAAA,IAQG,eAAsB;EAAA;EAAA;EAM1B,yBAAY,WAA0B,EAClB,gBAA0D,EAAA;IAAA;IAAA;IAC5E,0BAAM,WAAW;IADC,MAAA,gBAAgB,GAAhB,gBAAgB;IAJ5B,MAAA,QAAQ,GAAY,KAAK;IAAC;EAMlC;EAAC;IAAA;IAAA,OAES,eAAM,KAAQ,EAAA;MACtB,IAAI,CAAC,KAAK,GAAG,KAAK;MAClB,IAAI,CAAC,QAAQ,GAAG,IAAI;MACpB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;QACnB,IAAI,QAAQ;QACZ,IAAI;UACF,IAAQ,gBAAgB,GAAK,IAAI,CAAzB,gBAAgB;UACxB,QAAQ,GAAG,gBAAgB,CAAC,KAAK,CAAC;SACnC,CAAC,OAAO,GAAG,EAAE;UACZ,OAAO,IAAI,CAAC,WAAW,CAAC,KAAM,CAAC,GAAG,CAAC;QACpC;QACD,IAAM,iBAAiB,GAAG,cAAc,CAAC,QAAQ,EAAE,IAAI,qBAAqB,CAAC,IAAI,CAAC,CAAC;QACnF,IAAI,CAAC,iBAAiB,IAAI,iBAAiB,CAAC,MAAM,EAAE;UAClD,IAAI,CAAC,aAAa,EAAE;SACrB,MAAM;UACL,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,iBAAiB,CAAC;QAC7C;MACF;IACH;EAAC;IAAA;IAAA,OAED,yBAAa;MACX,IAAQ,KAAK,GAA0B,IAAI,CAAnC,KAAK;QAAE,QAAQ,GAAgB,IAAI,CAA5B,QAAQ;QAAE,SAAS,GAAK,IAAI,CAAlB,SAAS;MAClC,IAAI,SAAS,EAAE;QACb,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,SAAS;QAC1B,SAAS,CAAC,WAAW,EAAE;MACxB;MACD,IAAI,QAAQ,EAAE;QACZ,IAAI,CAAC,KAAK,GAAG,SAAS;QACtB,IAAI,CAAC,QAAQ,GAAG,KAAK;QACrB,IAAI,CAAC,WAAW,CAAC,IAAK,CAAC,KAAK,CAAC;MAC9B;IACH;EAAC;IAAA;IAAA,OAED,sBAAU;MACR,IAAI,CAAC,aAAa,EAAE;IACtB;EAAC;IAAA;IAAA,OAED,0BAAc;MACZ,IAAI,CAAC,aAAa,EAAE;IACtB;EAAC;EAAA;AAAA,EAnDiC,qBAA2B","sourcesContent":["import { SimpleOuterSubscriber, innerSubscribe, SimpleInnerSubscriber } from '../innerSubscribe';\nexport function audit(durationSelector) {\n    return function auditOperatorFunction(source) {\n        return source.lift(new AuditOperator(durationSelector));\n    };\n}\nclass AuditOperator {\n    constructor(durationSelector) {\n        this.durationSelector = durationSelector;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new AuditSubscriber(subscriber, this.durationSelector));\n    }\n}\nclass AuditSubscriber extends SimpleOuterSubscriber {\n    constructor(destination, durationSelector) {\n        super(destination);\n        this.durationSelector = durationSelector;\n        this.hasValue = false;\n    }\n    _next(value) {\n        this.value = value;\n        this.hasValue = true;\n        if (!this.throttled) {\n            let duration;\n            try {\n                const { durationSelector } = this;\n                duration = durationSelector(value);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n            const innerSubscription = innerSubscribe(duration, new SimpleInnerSubscriber(this));\n            if (!innerSubscription || innerSubscription.closed) {\n                this.clearThrottle();\n            }\n            else {\n                this.add(this.throttled = innerSubscription);\n            }\n        }\n    }\n    clearThrottle() {\n        const { value, hasValue, throttled } = this;\n        if (throttled) {\n            this.remove(throttled);\n            this.throttled = undefined;\n            throttled.unsubscribe();\n        }\n        if (hasValue) {\n            this.value = undefined;\n            this.hasValue = false;\n            this.destination.next(value);\n        }\n    }\n    notifyNext() {\n        this.clearThrottle();\n    }\n    notifyComplete() {\n        this.clearThrottle();\n    }\n}\n//# sourceMappingURL=audit.js.map"]},"metadata":{},"sourceType":"module"}