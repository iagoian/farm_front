{"ast":null,"code":"import _inherits from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Subscriber } from '../Subscriber';\nexport function refCount() {\n  return function refCountOperatorFunction(source) {\n    return source.lift(new RefCountOperator(source));\n  };\n}\nvar RefCountOperator = /*#__PURE__*/function () {\n  function RefCountOperator(connectable) {\n    _classCallCheck(this, RefCountOperator);\n    this.connectable = connectable;\n  }\n  _createClass(RefCountOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      var connectable = this.connectable;\n      connectable._refCount++;\n      var refCounter = new RefCountSubscriber(subscriber, connectable);\n      var subscription = source.subscribe(refCounter);\n      if (!refCounter.closed) {\n        refCounter.connection = connectable.connect();\n      }\n      return subscription;\n    }\n  }]);\n  return RefCountOperator;\n}();\nvar RefCountSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(RefCountSubscriber, _Subscriber);\n  var _super = _createSuper(RefCountSubscriber);\n  function RefCountSubscriber(destination, connectable) {\n    var _this;\n    _classCallCheck(this, RefCountSubscriber);\n    _this = _super.call(this, destination);\n    _this.connectable = connectable;\n    return _this;\n  }\n  _createClass(RefCountSubscriber, [{\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var connectable = this.connectable;\n      if (!connectable) {\n        this.connection = null;\n        return;\n      }\n      this.connectable = null;\n      var refCount = connectable._refCount;\n      if (refCount <= 0) {\n        this.connection = null;\n        return;\n      }\n      connectable._refCount = refCount - 1;\n      if (refCount > 1) {\n        this.connection = null;\n        return;\n      }\n      var connection = this.connection;\n      var sharedConnection = connectable._connection;\n      this.connection = null;\n      if (sharedConnection && (!connection || sharedConnection === connection)) {\n        sharedConnection.unsubscribe();\n      }\n    }\n  }]);\n  return RefCountSubscriber;\n}(Subscriber);","map":{"version":3,"sources":["../../../src/internal/operators/refCount.ts"],"names":[],"mappings":";;;;AACA,SAAS,UAAU,QAAQ,eAAe;AA2D1C,OAAM,SAAU,QAAQ,GAAA;EACtB,OAAO,SAAS,wBAAwB,CAAC,MAAgC,EAAA;IACvE,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,gBAAgB,CAAC,MAAM,CAAC,CAAC;EAClD,CAAgC;AAClC;AAAC,IAEK,gBAAgB;EACpB,0BAAoB,WAAqC,EAAA;IAAA;IAArC,IAAA,CAAA,WAAW,GAAX,WAAW;EAC/B;EAAC;IAAA;IAAA,OACD,cAAK,UAAyB,EAAE,MAAW,EAAA;MAEzC,IAAQ,WAAW,GAAK,IAAI,CAApB,WAAW;MACZ,WAAY,CAAC,SAAS,EAAE;MAE/B,IAAM,UAAU,GAAG,IAAI,kBAAkB,CAAC,UAAU,EAAE,WAAW,CAAC;MAClE,IAAM,YAAY,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC;MAEjD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;QACf,UAAW,CAAC,UAAU,GAAG,WAAW,CAAC,OAAO,EAAE;MACtD;MAED,OAAO,YAAY;IACrB;EAAC;EAAA;AAAA;AAAA,IAGG,kBAAsB;EAAA;EAAA;EAI1B,4BAAY,WAA0B,EAClB,WAAqC,EAAA;IAAA;IAAA;IACvD,0BAAM,WAAW;IADC,MAAA,WAAW,GAAX,WAAW;IAA0B;EAEzD;EAAC;IAAA;IAAA,OAES,wBAAY;MAEpB,IAAQ,WAAW,GAAK,IAAI,CAApB,WAAW;MACnB,IAAI,CAAC,WAAW,EAAE;QAChB,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB;MACD;MAED,IAAI,CAAC,WAAW,GAAG,IAAI;MACvB,IAAM,QAAQ,GAAU,WAAY,CAAC,SAAS;MAC9C,IAAI,QAAQ,IAAI,CAAC,EAAE;QACjB,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB;MACD;MAEM,WAAY,CAAC,SAAS,GAAG,QAAQ,GAAG,CAAC;MAC5C,IAAI,QAAQ,GAAG,CAAC,EAAE;QAChB,IAAI,CAAC,UAAU,GAAG,IAAI;QACtB;MACD;MA0BD,IAAQ,UAAU,GAAK,IAAI,CAAnB,UAAU;MAClB,IAAM,gBAAgB,GAAU,WAAY,CAAC,WAAW;MACxD,IAAI,CAAC,UAAU,GAAG,IAAI;MAEtB,IAAI,gBAAgB,KAAK,CAAC,UAAU,IAAI,gBAAgB,KAAK,UAAU,CAAC,EAAE;QACxE,gBAAgB,CAAC,WAAW,EAAE;MAC/B;IACH;EAAC;EAAA;AAAA,EA7DiC,UAAa","sourcesContent":["import { Subscriber } from '../Subscriber';\nexport function refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator(source));\n    };\n}\nclass RefCountOperator {\n    constructor(connectable) {\n        this.connectable = connectable;\n    }\n    call(subscriber, source) {\n        const { connectable } = this;\n        connectable._refCount++;\n        const refCounter = new RefCountSubscriber(subscriber, connectable);\n        const subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    }\n}\nclass RefCountSubscriber extends Subscriber {\n    constructor(destination, connectable) {\n        super(destination);\n        this.connectable = connectable;\n    }\n    _unsubscribe() {\n        const { connectable } = this;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        const refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        const { connection } = this;\n        const sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    }\n}\n//# sourceMappingURL=refCount.js.map"]},"metadata":{},"sourceType":"module"}