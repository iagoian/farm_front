{"ast":null,"code":"import _inherits from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport _classCallCheck from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/dev-faculdade/Portifolio/Teste-Job-V2/Farm/farm_front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function takeLast(count) {\n  return function takeLastOperatorFunction(source) {\n    if (count === 0) {\n      return empty();\n    } else {\n      return source.lift(new TakeLastOperator(count));\n    }\n  };\n}\nvar TakeLastOperator = /*#__PURE__*/function () {\n  function TakeLastOperator(total) {\n    _classCallCheck(this, TakeLastOperator);\n    this.total = total;\n    if (this.total < 0) {\n      throw new ArgumentOutOfRangeError();\n    }\n  }\n  _createClass(TakeLastOperator, [{\n    key: \"call\",\n    value: function call(subscriber, source) {\n      return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    }\n  }]);\n  return TakeLastOperator;\n}();\nvar TakeLastSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(TakeLastSubscriber, _Subscriber);\n  var _super = _createSuper(TakeLastSubscriber);\n  function TakeLastSubscriber(destination, total) {\n    var _this;\n    _classCallCheck(this, TakeLastSubscriber);\n    _this = _super.call(this, destination);\n    _this.total = total;\n    _this.ring = new Array();\n    _this.count = 0;\n    return _this;\n  }\n  _createClass(TakeLastSubscriber, [{\n    key: \"_next\",\n    value: function _next(value) {\n      var ring = this.ring;\n      var total = this.total;\n      var count = this.count++;\n      if (ring.length < total) {\n        ring.push(value);\n      } else {\n        var index = count % total;\n        ring[index] = value;\n      }\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      var destination = this.destination;\n      var count = this.count;\n      if (count > 0) {\n        var total = this.count >= this.total ? this.total : this.count;\n        var ring = this.ring;\n        for (var i = 0; i < total; i++) {\n          var idx = count++ % total;\n          destination.next(ring[idx]);\n        }\n      }\n      destination.complete();\n    }\n  }]);\n  return TakeLastSubscriber;\n}(Subscriber);","map":{"version":3,"sources":["../../../src/internal/operators/takeLast.ts"],"names":[],"mappings":";;;;AACA,SAAS,UAAU,QAAQ,eAAe;AAC1C,SAAS,uBAAuB,QAAQ,iCAAiC;AACzE,SAAS,KAAK,QAAQ,qBAAqB;AA8C3C,OAAM,SAAU,QAAQ,CAAI,KAAa,EAAA;EACvC,OAAO,SAAS,wBAAwB,CAAC,MAAqB,EAAA;IAC5D,IAAI,KAAK,KAAK,CAAC,EAAE;MACf,OAAO,KAAK,EAAE;KACf,MAAM;MACL,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAChD;EACH,CAAC;AACH;AAAC,IAEK,gBAAgB;EACpB,0BAAoB,KAAa,EAAA;IAAA;IAAb,IAAA,CAAA,KAAK,GAAL,KAAK;IACvB,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;MAClB,MAAM,IAAI,uBAAuB;IAClC;EACH;EAAC;IAAA;IAAA,OAED,cAAK,UAAyB,EAAE,MAAW,EAAA;MACzC,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,kBAAkB,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACzE;EAAC;EAAA;AAAA;AAAA,IAQG,kBAAsB;EAAA;EAAA;EAI1B,4BAAY,WAA0B,EAAU,KAAa,EAAA;IAAA;IAAA;IAC3D,0BAAM,WAAW;IAD6B,MAAA,KAAK,GAAL,KAAK;IAH7C,MAAA,IAAI,GAAa,IAAI,KAAK,EAAE;IAC5B,MAAA,KAAK,GAAW,CAAC;IAAC;EAI1B;EAAC;IAAA;IAAA,OAES,eAAM,KAAQ,EAAA;MACtB,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI;MACtB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK;MACxB,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,EAAE;MAE1B,IAAI,IAAI,CAAC,MAAM,GAAG,KAAK,EAAE;QACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;OACjB,MAAM;QACL,IAAM,KAAK,GAAG,KAAK,GAAG,KAAK;QAC3B,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK;MACpB;IACH;EAAC;IAAA;IAAA,OAES,qBAAS;MACjB,IAAM,WAAW,GAAG,IAAI,CAAC,WAAW;MACpC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK;MAEtB,IAAI,KAAK,GAAG,CAAC,EAAE;QACb,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK;QAChE,IAAM,IAAI,GAAI,IAAI,CAAC,IAAI;QAEvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;UAC9B,IAAM,GAAG,GAAI,KAAK,EAAE,GAAI,KAAK;UAC7B,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC5B;MACF;MAED,WAAW,CAAC,QAAQ,EAAE;IACxB;EAAC;EAAA;AAAA,EApCiC,UAAa","sourcesContent":["import { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function takeLast(count) {\n    return function takeLastOperatorFunction(source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeLastOperator(count));\n        }\n    };\n}\nclass TakeLastOperator {\n    constructor(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    call(subscriber, source) {\n        return source.subscribe(new TakeLastSubscriber(subscriber, this.total));\n    }\n}\nclass TakeLastSubscriber extends Subscriber {\n    constructor(destination, total) {\n        super(destination);\n        this.total = total;\n        this.ring = new Array();\n        this.count = 0;\n    }\n    _next(value) {\n        const ring = this.ring;\n        const total = this.total;\n        const count = this.count++;\n        if (ring.length < total) {\n            ring.push(value);\n        }\n        else {\n            const index = count % total;\n            ring[index] = value;\n        }\n    }\n    _complete() {\n        const destination = this.destination;\n        let count = this.count;\n        if (count > 0) {\n            const total = this.count >= this.total ? this.total : this.count;\n            const ring = this.ring;\n            for (let i = 0; i < total; i++) {\n                const idx = (count++) % total;\n                destination.next(ring[idx]);\n            }\n        }\n        destination.complete();\n    }\n}\n//# sourceMappingURL=takeLast.js.map"]},"metadata":{},"sourceType":"module"}